
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Rendu front, action ! Découvrez les différents modes de rendu avec Next.js</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/claat-public/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14" ga4id=""></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  codelab-ga4id=""
                  id="docs"
                  title="Rendu front, action ! Découvrez les différents modes de rendu avec Next.js"
                  environment="web"
                  feedback-link="">
    
      <google-codelab-step label="Initialisation du codelab" duration="5">
        <p>Prérequis :</p>
<ul>
<li><a href="https://git-scm.com/" target="_blank">Git</a></li>
<li><a href="https://nodejs.org/" target="_blank">Node / npm</a> (version 18 minimum)</li>
<li><a href="https://code.visualstudio.com/" target="_blank">Visual Studio Code</a> (ou tout autre IDE JS)</li>
</ul>
<aside class="warning"><p>Il est impératif d&#39;avoir une version 18 minimale de Node.js car elle est un prérequis pour les React Server Components que nous verrons dans ce codelab.</p>
</aside>
<p>Pour ce codelab nous utiliserons deux repositories :</p>
<ul>
<li>L&#39;un qui servira pour l&#39;exercice sur le client side rendering</li>
<li>L&#39;autre servira pour les exercices suivants basés sur Next.js</li>
</ul>
<p>Installer le projet pour l&#39;exercice sur le client side rendering, en se positionnant sur la branche <code>start</code> :</p>
<pre><code language="language-bash" class="language-bash">git clone --branch start https://github.com/Codelab-DevFest-2023/codelab-devfest2023-csr.git
cd codelab-devfest2023-csr
npm install
</code></pre>
<p>Lancer la commande <code>npm run dev</code> et vérifier qu&#39;on a bien une application qui s&#39;affiche sur l&#39;url <code>http://localhost:3000</code>.</p>
<p>Puis installer le projet pour les exercices avec Next.js :</p>
<pre><code language="language-bash" class="language-bash">git clone --branch start https://github.com/Codelab-DevFest-2023/codelab-devfest2023-next.git
cd codelab-devfest2023-next
npm install
</code></pre>
<p>Lancer la commande <code>npm run dev</code> et vérifier qu&#39;on a bien une application qui s&#39;affiche sur l&#39;url <code>http://localhost:3000</code>.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Client Side Rendering" duration="20">
        <p>Dans cette première partie, nous allons développer une application en Client Side Rendering s&#39;appuyant sur Vite.js, React et Tailwind. Nous n&#39;utiliserons donc pas Next.js dans cet exercice, mais il permettra de se rendre compte des différences entre le client side rendering et les autres modes de rendu que nous verrons plus tard.</p>
<aside class="special"><p>Pour se concentrer sur ce qui est spécifique au client side rendering, certains composants vous sont déjà fournis dans le repository : carte d&#39;un film, méthodes de fetch, composant de layout, etc...</p>
</aside>
<h2 is-upgraded>Liste des films</h2>
<p>Pour commencer, nous allons créer un écran affichant la liste des films. Nous avons donc besoin de créer :</p>
<ul>
<li>Un hook <code>useMovies</code> qui permet de charger la liste des films</li>
<li>Un composant <code>MoviesList</code> qui affiche la liste des films</li>
<li>Une route <code>/movies</code> associée au composant <code>MoviesList</code></li>
</ul>
<p>Dans le répertoire <code>/src/hooks</code> du projet créons le fichier <code>useMovies.ts</code>. Ce hook s&#39;appuie sur la librairie React Query pour gérer du cache.</p>
<pre><code language="language-ts" class="language-ts">import { useQuery } from &#34;@tanstack/react-query&#34;;

export default useMovies = () =&gt; {
  return useQuery({});
};
</code></pre>
<p>Puis dans le répertoire <code>/src/pages</code> nous allons créer le fichier <code>MoviesListPage.tsx</code> qui utilise le hook <code>useMovies</code> pour récupérer les films puis parcourt les films pour afficher une card pour chaque film. Un loader est affiché pendant le chargement des films.</p>
<pre><code language="language-ts" class="language-ts">TODO;
</code></pre>
<p>Enfin nous allons créer une route <code>/movies</code> dans le fichier <code>/src/router.ts</code>. Cette route est associée au composant <code>MoviesListPage</code>.</p>
<pre><code language="language-ts" class="language-ts">TODO;
</code></pre>
<p>Nous pouvons démarrer l&#39;application avec la commande <code>npm run dev</code> et constater que la liste des films s&#39;affiche correctement.</p>
<h2 is-upgraded>Détail d&#39;un film</h2>
<p>Ensuite nous allons créer un écran affichant le détail de chaque film. Nous avons besoin de créer :</p>
<ul>
<li>Un hook <code>useMovie</code> qui permet de charger le détail du film</li>
<li>Un composant <code>MovieDetailsPage</code> qui définit la page de détail d&#39;un film</li>
<li>Une route <code>/movies/:id</code> qui définit des routes pour le</li>
</ul>
<p>Dans le répertoire <code>/src/hooks</code> du projet créons le fichier <code>useMovie.ts</code> avec le contenu suivant :</p>
<pre><code language="language-ts" class="language-ts">import { useQuery } from &#34;@tanstack/react-query&#34;;

export default useMovie = () =&gt; {
  return useQuery({...});
};
</code></pre>
<p>Puis dans le répertoire <code>/src/pages</code> nous allons créer le fichier <code>MovieDetailsPage.tsx</code> qui utilise le hook <code>useMovie</code> pour récupérer le détail du film puis afficher les informations. Un loader est affiché pendant le chargement du film.</p>
<pre><code language="language-ts" class="language-ts">TODO;
</code></pre>
<p>Enfin nous allons créer une route <code>/movies/:id</code> dans le fichier <code>/src/router.ts</code>. Cette route est associée au composant <code>MovieDetailsPage</code>.</p>
<pre><code language="language-ts" class="language-ts">TODO;
</code></pre>
<p>Nous pouvons démarrer l&#39;application avec la commande <code>npm run dev</code> et constater que la liste des films s&#39;affiche correctement.</p>
<h2 is-upgraded>Analysons cette application</h2>
<p>Ouvrons les devtools de Chrome (ou équivalent) pour observer :</p>
<ul>
<li>Les chargements de fichiers Javascript</li>
<li>Les appels de service REST</li>
</ul>
<p>Enfin affichons le code source de la page pour constater que cette page n&#39;est pas très &#34;SEO friendly&#34; !</p>


      </google-codelab-step>
    
      <google-codelab-step label="Server Side Rendering" duration="20">
        <aside class="special"><p>Si vous n&#39;avez pas eu le temps de finir l&#39;étape précédente, vous pouvez faire un checkout de la branche &#34;step3&#34; pour débuter cette étape : <code>git checkout -f step3</code></p>
</aside>
<h2 is-upgraded>Liste des films</h2>
<p>TODO</p>
<h2 is-upgraded>Détail d&#39;un film</h2>
<p>TODO</p>
<h2 is-upgraded>Recherche de films</h2>
<p>TODO</p>
<h2 is-upgraded>Gestion de favoris</h2>
<p>TODO</p>
<h2 is-upgraded>Observons ce qui se passe</h2>
<p>TODO</p>


      </google-codelab-step>
    
      <google-codelab-step label="Static Site Generation" duration="25">
        <aside class="special"><p>Si vous n&#39;avez pas eu le temps de finir l&#39;étape précédente, vous pouvez faire un checkout de la branche &#34;step4&#34; pour débuter cette étape : <code>git checkout -f step4</code></p>
</aside>
<h2 is-upgraded>Liste des films</h2>
<p>TODO</p>
<h2 is-upgraded>Détail d&#39;un film</h2>
<p>TODO</p>
<h2 is-upgraded>Optimisation des images</h2>
<p>TODO</p>


      </google-codelab-step>
    
      <google-codelab-step label="React Server Components" duration="15">
        <aside class="special"><p>Si vous n&#39;avez pas eu le temps de finir l&#39;étape précédente, vous pouvez faire un checkout de la branche &#34;step5&#34; pour débuter cette étape : <code>git checkout -f step5</code></p>
</aside>
<h2 is-upgraded>Liste des films</h2>
<p>TODO</p>
<h2 is-upgraded>Détail d&#39;un film</h2>
<p>TODO</p>
<h2 is-upgraded>Recherche de films</h2>
<p>TODO</p>
<h2 is-upgraded>Gestion de favoris</h2>
<p>TODO</p>
<h2 is-upgraded>Affichage de la note</h2>
<p>TODO La note</p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/claat-public/native-shim.js"></script>
  <script src="https://storage.googleapis.com/claat-public/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/claat-public/prettify.js"></script>
  <script src="https://storage.googleapis.com/claat-public/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
